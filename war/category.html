<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.1.0/chosen.min.css">
<link rel="image_src" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.1.0/chosen-sprite.png">
<link rel="stylesheet" href="css/style.css" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.4.2/chosen.jquery.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.4.7/angular.min.js"></script>

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootbox.js/4.4.0/bootbox.min.js"></script>

<script src="js/app.js"></script>
<script src="js/category.js"></script>
<script src="js/3rdParty/angular-chosen.min.js"></script>
<script src="js/3rdParty/angular-translate.min.js"></script>

<meta charset="UTF-8">
</head>
<body ng-app="myApp" ng-controller="categoryController">

	<div class="container">

		<div id="alerts"></div>

		<div class="btn-group pull-right" role="group">
			<button class="btn btn-info" ng-click="addNewCategory()">
				<span class="glyphicon glyphicon-plus"></span>&nbsp;&nbsp;{{ "NEW_CATEGORY" | translate }}
			</button>

			<button id="refreshButton" class="btn btn-info " ng-click="refreshCategories()">
				<span class="glyphicon glyphicon-refresh"></span>&nbsp;&nbsp;{{ "REFRESH" | translate }}
			</button>
		</div>


		<table class="table table-striped">
			<thead>
				<tr>
					<th translate="NAME" />
					<th translate="PARENT_CATEGORY" />
					<th />
				</tr>
			</thead>
			<tbody>
				<tr ng-switch on="category.mode" ng-repeat="category in categories">

					<td ng-switch-when="readOnly">{{ category.name }}</td>
					<td ng-switch-when="readOnly">{{ category.parentName }}</td>
					<td ng-switch-when="edit"><input type="text" class="form-control" ng-model="category.name" /></td>
					<td ng-switch-when="edit"><select chosen ng-model="category.parentId"
						ng-options="category.id as category.name for category in categoriesForSelect(category.id)">
							<option value="" translate="MAIN_CATEGORY" />
					</select></td>

					<td>
						<button ng-switch-when="readOnly" class="btn btn-primary" ng-click="editCategory(category.id)">
							<span class="glyphicon glyphicon-pencil"></span>&nbsp;&nbsp;{{ "EDIT" | translate }}
						</button>
						<button ng-switch-when="edit" class="btn btn-success" ng-click="saveCategory(category)">
							<span class="glyphicon glyphicon-ok"></span>&nbsp;&nbsp;{{ "SAVE" | translate }}
						</button>
						<button ng-switch-when="edit" class="btn btn-warning" ng-click="cancelEditCategory(category.id)">
							<span class="glyphicon glyphicon-remove"></span>&nbsp;&nbsp;{{ "CANCEL" | translate }}
						</button>
						<button ng-switch-when="edit" class="btn btn-danger" ng-click="removeCategory(category.id, category.name)">
							<span class="glyphicon glyphicon-trash"></span>&nbsp;&nbsp;{{ "DELETE" | translate }}
						</button>
					</td>

				</tr>

				<tr ng-show="newCategory.visible">
					<td><input type="text" class="form-control" ng-model="newCategory.name" /></td>
					<td><select chosen class="form-control" ng-model="newCategory.parentCategoryId" ng-options="category.id as category.name for category in categories">
							<option value="" translate="MAIN_CATEGORY" />
					</select></td>
					<td>
						<button class="btn btn-success" ng-click="saveNewCategory(newCategory)">
							<span class="glyphicon glyphicon-ok"></span>&nbsp;&nbsp;{{ "SAVE" | translate }}
						</button>

						<button class="btn btn-warning" ng-click="cancelAddNewCategory()">
							<span class="glyphicon glyphicon-remove"></span>&nbsp;&nbsp;{{ "CANCEL" | translate }}
						</button>
					</td>
				</tr>

			</tbody>
		</table>
	</div>

</body>
</html>
